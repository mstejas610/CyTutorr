<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dropdown Test - CyTutor</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <link rel="stylesheet" href="styles/global.css">
  <link rel="stylesheet" href="styles/app.css">
  <style>
    .test-container {
      padding: 2rem;
      text-align: center;
      margin-top: 2rem;
    }
    .test-button {
      background: var(--primary);
      color: white;
      padding: 1rem 2rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      margin: 1rem;
    }
  </style>
</head>
<body>
  <div class="page-wrapper">
    <canvas id="particles-bg"></canvas>

    <header>
      <div class="container">
        <h1><a href="dashboard.html">CyTutor</a></h1>
        <nav>
          <a href="dashboard.html">Dashboard</a>
          <a href="challenges.html">Challenges</a>
          <a href="domains.html">Learning Paths</a>
          <a href="leaderboard.html">Leaderboard</a>
        </nav>
        <div class="header-right">
          <div class="user-menu">
            <div class="user-profile-toggle">
              <div class="user-avatar">JD</div>
              <span class="user-name">John Doe</span>
              <i data-lucide="chevron-down"></i>
            </div>
            <div class="dropdown-menu">
              <a href="profile.html"><i data-lucide="user"></i> Profile</a>
              <a href="settings.html"><i data-lucide="settings"></i> Settings</a>
              <a href="#" class="logout-btn" onclick="handleLogout()"><i data-lucide="log-out"></i> Logout</a>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main>
      <div class="container">
        <div class="test-container">
          <h1>üß™ Dropdown Menu Test Page</h1>
          <p>This page is for testing the dropdown menu functionality.</p>
          <p><strong>Instructions:</strong> Click on the "JD John Doe ‚ñº" area in the top-right corner to test the dropdown.</p>
          
          <div style="margin: 2rem 0; padding: 2rem; background: rgba(26, 26, 26, 0.5); border-radius: 12px; border: 1px solid var(--border-color);">
            <h3>Test Buttons</h3>
            <button class="test-button" onclick="testDropdown()">üîß Manual Dropdown Toggle</button>
            <button class="test-button" onclick="checkElements()">üîç Check Elements</button>
            <button class="test-button" onclick="showDebugInfo()">üìã Debug Info</button>
          </div>

          <div id="debug-output" style="margin-top: 2rem; padding: 1rem; background: rgba(0, 0, 0, 0.3); border-radius: 8px; font-family: monospace; text-align: left; display: none;">
            <h4>Debug Output:</h4>
            <pre id="debug-text"></pre>
          </div>
        </div>
      </div>
    </main>

    <script src="scripts/main.js"></script>
    <script>
      // Test functions
      function testDropdown() {
        const dropdown = document.querySelector('.dropdown-menu');
        const toggle = document.querySelector('.user-profile-toggle');
        
        if (dropdown.classList.contains('show')) {
          dropdown.classList.remove('show');
          dropdown.style.display = 'none';
          toggle.classList.remove('active');
          console.log('Manually closed dropdown');
        } else {
          dropdown.classList.add('show');
          dropdown.style.display = 'block';
          toggle.classList.add('active');
          console.log('Manually opened dropdown');
        }
      }

      function checkElements() {
        const toggle = document.querySelector('.user-profile-toggle');
        const dropdown = document.querySelector('.dropdown-menu');
        
        console.log('Toggle element:', toggle);
        console.log('Dropdown element:', dropdown);
        console.log('Toggle has click listener:', toggle ? 'Yes' : 'No');
        
        alert(`Toggle found: ${toggle ? 'Yes' : 'No'}\nDropdown found: ${dropdown ? 'Yes' : 'No'}`);
      }

      function showDebugInfo() {
        const debugOutput = document.getElementById('debug-output');
        const debugText = document.getElementById('debug-text');
        
        const toggle = document.querySelector('.user-profile-toggle');
        const dropdown = document.querySelector('.dropdown-menu');
        
        const info = `
Toggle Element: ${toggle ? 'Found ‚úì' : 'Not Found ‚úó'}
Dropdown Element: ${dropdown ? 'Found ‚úì' : 'Not Found ‚úó'}
Dropdown Classes: ${dropdown ? dropdown.className : 'N/A'}
Dropdown Display: ${dropdown ? dropdown.style.display || 'default' : 'N/A'}
Toggle Classes: ${toggle ? toggle.className : 'N/A'}
Font Awesome Loaded: ${document.querySelector('link[href*="font-awesome"]') ? 'Yes ‚úì' : 'No ‚úó'}
        `;
        
        debugText.textContent = info;
        debugOutput.style.display = 'block';
      }

      // Initialize Lucide icons
      document.addEventListener('DOMContentLoaded', function() {
        lucide.createIcons();
        console.log('Lucide icons initialized');
      });
    </script>
  </div>
</body>
</html>
